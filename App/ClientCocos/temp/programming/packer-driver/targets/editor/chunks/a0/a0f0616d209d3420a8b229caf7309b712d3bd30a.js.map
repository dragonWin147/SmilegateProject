{"version":3,"sources":["file:///Users/brian/Work/C++/ClientCocos/assets/Scripts/GameController.ts"],"names":["_decorator","Component","EditBox","Label","log","SocketHandler","LobbyText","ccclass","property","GameController","getInstance","instance","onLoad","connectToServer","showNotify","content","lbNotify","string","onLogin","name","edbUserName","pass","edbPass","NAME_LOGIN_EMPTY","PASS_LOGIN_EMPTY","message","method","data","user","sendMessage","JSON","stringify","resultLogin","dataLogin","showError","errorCode","reason"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,O,OAAAA,O;AAASC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,G,OAAAA,G;;AAC5BC,MAAAA,a,iBAAAA,a;;AACXC,MAAAA,S,iBAAAA,S;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;gCAGjBS,c,WADZF,OAAO,CAAC,gBAAD,C,UAEHC,QAAQ,CAACN,OAAD,C,UAGRM,QAAQ,CAACN,OAAD,C,UAGRM,QAAQ,CAACL,KAAD,C,sCARb,MACaM,cADb,SACoCR,SADpC,CAC8C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAajB,eAAXS,WAAW,GAAE;AACvB,iBAAO,KAAKC,QAAZ;AACH;;AAEDC,QAAAA,MAAM,GAAG;AACL;AAAA;AAAA,8CAAcF,WAAd,GAA4BG,eAA5B;AACAJ,UAAAA,cAAc,CAACE,QAAf,GAA0B,IAA1B;AACH;;AAEDG,QAAAA,UAAU,CAACC,OAAD,EAAkB;AACxB,eAAKC,QAAL,CAAcC,MAAd,GAAuBF,OAAvB;AACH;;AAEDG,QAAAA,OAAO,GAAG;AACN,cAAIC,IAAI,GAAG,KAAKC,WAAL,CAAiBH,MAA5B;AACA,cAAII,IAAI,GAAG,KAAKC,OAAL,CAAaL,MAAxB;;AAEA,cAAIE,IAAI,IAAI,EAAZ,EAAgB;AACZ,iBAAKL,UAAL,CAAgB;AAAA;AAAA,wCAAUS,gBAA1B;AACA;AACH;;AAED,cAAIF,IAAI,IAAI,EAAZ,EAAgB;AACZ,iBAAKP,UAAL,CAAgB;AAAA;AAAA,wCAAUU,gBAA1B;AACA;AACH;;AAED,eAAKV,UAAL,CAAgB,EAAhB;AAEA,gBAAMW,OAAO,GAAG;AACZC,YAAAA,MAAM,EAAG,OADG;AAEZC,YAAAA,IAAI,EAAG;AACHC,cAAAA,IAAI,EAAET,IADH;AAEHE,cAAAA,IAAI,EAAEA;AAFH;AAFK,WAAhB;AAQA;AAAA;AAAA,8CAAcX,WAAd,GAA4BmB,WAA5B,CAAwCC,IAAI,CAACC,SAAL,CAAeN,OAAf,CAAxC;AACH;;AAEDO,QAAAA,WAAW,CAACC,SAAD,EAAuB;AAC9B7B,UAAAA,GAAG,CAAC,aAAD,EAAe6B,SAAf,CAAH;AACH;;AAEDC,QAAAA,SAAS,CAACC,SAAD,EAAqBC,MAArB,EAAqC;AAC1ChC,UAAAA,GAAG,CAAC,WAAD,EAAa+B,SAAb,CAAH;AACA,eAAKrB,UAAL,CAAgBsB,MAAhB;AACH;;AA5DyC,O,UAW3BzB,Q,GAA2B,I","sourcesContent":["import { _decorator, Component, EditBox, Label, log, Node } from 'cc';\nimport { DataLogin, SocketHandler } from './SocketHandler';\nimport { LobbyText } from './LobbyText';\nconst { ccclass, property } = _decorator;\n\n@ccclass('GameController')\nexport class GameController extends Component {\n    @property(EditBox)\n    edbUserName!: EditBox;\n\n    @property(EditBox)\n    edbPass!: EditBox;\n\n    @property(Label)\n    lbNotify!: Label;\n\n\n    private static instance: GameController = null;\n\n    public static getInstance(){\n        return this.instance;\n    }\n\n    onLoad() {\n        SocketHandler.getInstance().connectToServer();\n        GameController.instance = this;\n    }\n\n    showNotify(content: string) {\n        this.lbNotify.string = content;\n    }\n\n    onLogin() {\n        let name = this.edbUserName.string;\n        let pass = this.edbPass.string;\n\n        if (name == \"\") {\n            this.showNotify(LobbyText.NAME_LOGIN_EMPTY);\n            return;\n        }\n\n        if (pass == \"\") {\n            this.showNotify(LobbyText.PASS_LOGIN_EMPTY);\n            return;\n        }\n\n        this.showNotify(\"\");\n\n        const message = {\n            method : \"LOGIN\",\n            data : {\n                user: name,\n                pass: pass\n            }\n        };\n\n        SocketHandler.getInstance().sendMessage(JSON.stringify(message))\n    }\n\n    resultLogin(dataLogin : DataLogin){\n        log(\"resultLogin\",dataLogin);\n    }\n\n    showError(errorCode : number, reason : string){\n        log(\"showError\",errorCode);\n        this.showNotify(reason);\n    }\n\n\n}\n\n"]}